{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class RazorpayComponent {\n  constructor(http) {\n    this.http = http;\n    this.amount = 0;\n    this.razorpayOptions = {\n      key: 'rzp_test_zUGVgemrGsmL8z',\n      amount: 0,\n      currency: 'INR',\n      name: 'MedX',\n      description: 'Purchase Description',\n      image: 'https://your-company-logo-url',\n      handler: response => {\n        this.razorpaySuccessHandler(response);\n      },\n      prefill: {\n        name: 'Siddhanth Sinha',\n        email: 'siddhanthsinha1401@gmail.com'\n      },\n      notes: {\n        address: 'Razorpay Corporate Office'\n      },\n      theme: {\n        color: '#F37254'\n      }\n    };\n  }\n  initiatePayment() {\n    const options = {\n      ...this.razorpayOptions,\n      modal: {\n        ondismiss: () => {\n          this.razorpayFailureHandler();\n        }\n      }\n    };\n    console.log(this.amount);\n    Razorpay.open(options);\n  }\n  razorpaySuccessHandler(response) {\n    console.log(response);\n    // Handle success\n    let medici = localStorage.getItem('cart');\n    let medicine = [];\n    if (medici !== null) {\n      medicine = JSON.parse(medici);\n    }\n    const authData = {\n      data: {\n        status: \"1\",\n        email: localStorage.getItem('user'),\n        medicines: medicine\n      }\n    };\n    const response1 = this.http.post(\"http://localhost:3000/order/place\", authData, {\n      observe: 'response'\n    });\n    response1.subscribe(response => {\n      console.log(response.body);\n    });\n    alert('Payment successful!');\n  }\n  razorpayFailureHandler() {\n    // Handle failure callback\n    alert('Payment failed!');\n  }\n  ngOnInit() {\n    this.razorpayOptions.amount = Math.floor(this.amount * 100);\n  }\n}\nRazorpayComponent.ɵfac = function RazorpayComponent_Factory(t) {\n  return new (t || RazorpayComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\nRazorpayComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RazorpayComponent,\n  selectors: [[\"app-razorpay\"]],\n  inputs: {\n    amount: \"amount\"\n  },\n  decls: 13,\n  vars: 0,\n  consts: [[1, \"center-container\"], [3, \"click\"], [\"id\", \"razorpay-failure\", 2, \"display\", \"none\"], [\"id\", \"razorpay-error\", 2, \"display\", \"none\"]],\n  template: function RazorpayComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function RazorpayComponent_Template_button_click_1_listener() {\n        return ctx.initiatePayment();\n      });\n      i0.ɵɵtext(2, \"Pay with Razorpay\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"h2\");\n      i0.ɵɵtext(5, \"Payment Failed!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"p\");\n      i0.ɵɵtext(7, \"Please try again.\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"div\", 3)(9, \"h2\");\n      i0.ɵɵtext(10, \"Payment Error\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"p\");\n      i0.ɵɵtext(12, \"An error occurred during the payment process.\");\n      i0.ɵɵelementEnd()();\n    }\n  },\n  styles: [\".background[_ngcontent-%COMP%] {\\r\\n  position: fixed;\\r\\n  top: 0;\\r\\n  left: 0;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  overflow: hidden;\\r\\n  z-index: -1;\\r\\n}\\r\\n\\r\\n.container[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  height: 100vh;\\r\\n}\\r\\n\\r\\nbutton[_ngcontent-%COMP%] {\\r\\n  padding: 10px 20px;\\r\\n  background-color: darkcyan;\\r\\n  color: #FFF;\\r\\n  border: none;\\r\\n  cursor: pointer;\\r\\n  font-size: 16px;\\r\\n  margin-top: 10px;\\r\\n  border-radius: 7px;\\r\\n}\\r\\nbutton[_ngcontent-%COMP%]:hover{\\r\\n  background-color: darkblue;\\r\\n}\\r\\n\\r\\n#razorpay-failure[_ngcontent-%COMP%], #razorpay-error[_ngcontent-%COMP%] {\\r\\n  display: none;\\r\\n  margin-top: 20px;\\r\\n  padding: 10px;\\r\\n  background-color: #FED7D7;\\r\\n  color: #9B2C2C;\\r\\n  border: 1px solid #ECC5C5;\\r\\n  border-radius: 4px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcmF6b3JwYXkvcmF6b3JwYXkuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGVBQWU7RUFDZixNQUFNO0VBQ04sT0FBTztFQUNQLFdBQVc7RUFDWCxZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGFBQWE7RUFDYix1QkFBdUI7RUFDdkIsbUJBQW1CO0VBQ25CLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQiwwQkFBMEI7RUFDMUIsV0FBVztFQUNYLFlBQVk7RUFDWixlQUFlO0VBQ2YsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLDBCQUEwQjtBQUM1Qjs7QUFFQTs7RUFFRSxhQUFhO0VBQ2IsZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYix5QkFBeUI7RUFDekIsY0FBYztFQUNkLHlCQUF5QjtFQUN6QixrQkFBa0I7QUFDcEIiLCJzb3VyY2VzQ29udGVudCI6WyIuYmFja2dyb3VuZCB7XHJcbiAgcG9zaXRpb246IGZpeGVkO1xyXG4gIHRvcDogMDtcclxuICBsZWZ0OiAwO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHotaW5kZXg6IC0xO1xyXG59XHJcblxyXG4uY29udGFpbmVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgaGVpZ2h0OiAxMDB2aDtcclxufVxyXG5cclxuYnV0dG9uIHtcclxuICBwYWRkaW5nOiAxMHB4IDIwcHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogZGFya2N5YW47XHJcbiAgY29sb3I6ICNGRkY7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxuICBib3JkZXItcmFkaXVzOiA3cHg7XHJcbn1cclxuYnV0dG9uOmhvdmVye1xyXG4gIGJhY2tncm91bmQtY29sb3I6IGRhcmtibHVlO1xyXG59XHJcblxyXG4jcmF6b3JwYXktZmFpbHVyZSxcclxuI3Jhem9ycGF5LWVycm9yIHtcclxuICBkaXNwbGF5OiBub25lO1xyXG4gIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkVEN0Q3O1xyXG4gIGNvbG9yOiAjOUIyQzJDO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNFQ0M1QzU7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":";;AAUA,OAAM,MAAOA,iBAAiB;EAC5BC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;IACf,WAAM,GAAW,CAAC;IAC3B,oBAAe,GAAQ;MACrBC,GAAG,EAAE,yBAAyB;MAC9BC,MAAM,EAAE,CAAC;MACTC,QAAQ,EAAE,KAAK;MACfC,IAAI,EAAE,MAAM;MACZC,WAAW,EAAE,sBAAsB;MACnCC,KAAK,EAAE,+BAA+B;MACtCC,OAAO,EAAGC,QAAa,IAAI;QACzB,IAAI,CAACC,sBAAsB,CAACD,QAAQ,CAAC;MACvC,CAAC;MACDE,OAAO,EAAE;QACPN,IAAI,EAAE,iBAAiB;QACvBO,KAAK,EAAE;OACR;MACDC,KAAK,EAAE;QACLC,OAAO,EAAE;OACV;MACDC,KAAK,EAAE;QACLC,KAAK,EAAE;;KAEV;EAtBsC;EAwBvCC,eAAe;IACb,MAAMC,OAAO,GAAG;MACd,GAAG,IAAI,CAACC,eAAe;MACvBC,KAAK,EAAE;QACLC,SAAS,EAAE,MAAK;UACd,IAAI,CAACC,sBAAsB,EAAE;QAC/B;;KAEH;IACDC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACrB,MAAM,CAAC;IACxBsB,QAAQ,CAACC,IAAI,CAACR,OAAO,CAAC;EACxB;EAEAR,sBAAsB,CAACD,QAAa;IAClCc,OAAO,CAACC,GAAG,CAACf,QAAQ,CAAC;IACrB;IACA,IAAIkB,MAAM,GAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACvC,IAAIC,QAAQ,GAAC,EAAE;IACf,IAAGH,MAAM,KAAG,IAAI,EAAC;MACfG,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACL,MAAM,CAAC;;IAE/B,MAAMM,QAAQ,GAAI;MAACC,IAAI,EAAC;QAACC,MAAM,EAAC,GAAG;QAAGvB,KAAK,EAACgB,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;QAAGO,SAAS,EAACN;MAAQ;IAAC,CAAC;IAC/F,MAAMO,SAAS,GAAG,IAAI,CAACpC,IAAI,CAACqC,IAAI,CAAM,mCAAmC,EAAEL,QAAQ,EAAE;MAAEM,OAAO,EAAE;IAAU,CAAE,CAAC;IAC7GF,SAAS,CAACG,SAAS,CAAC/B,QAAQ,IAAE;MAC5Bc,OAAO,CAACC,GAAG,CAACf,QAAQ,CAACgC,IAAI,CAAC;IAC5B,CAAC,CAAC;IACFC,KAAK,CAAC,qBAAqB,CAAC;EAC9B;EAEApB,sBAAsB;IACpB;IACAoB,KAAK,CAAC,iBAAiB,CAAC;EAC1B;EACAC,QAAQ;IACN,IAAI,CAACxB,eAAe,CAAChB,MAAM,GAAGyC,IAAI,CAACC,KAAK,CAAC,IAAI,CAAC1C,MAAM,GAAC,GAAG,CAAC;EAC3D;;AA5DWJ,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;QAAjBA,iBAAiB;EAAA+C;EAAAC;IAAA5C;EAAA;EAAA6C;EAAAC;EAAAC;EAAAC;IAAA;MCV9BC,8BAA8B;MACpBA;QAAA,OAASC,qBAAiB;MAAA,EAAC;MAACD,iCAAiB;MAAAA,iBAAS;MAE9DA,8BAAkD;MAC5CA,+BAAe;MAAAA,iBAAK;MACxBA,yBAAG;MAAAA,iCAAiB;MAAAA,iBAAI;MAG1BA,8BAAgD;MAC1CA,8BAAa;MAAAA,iBAAK;MACtBA,0BAAG;MAAAA,8DAA6C;MAAAA,iBAAI","names":["RazorpayComponent","constructor","http","key","amount","currency","name","description","image","handler","response","razorpaySuccessHandler","prefill","email","notes","address","theme","color","initiatePayment","options","razorpayOptions","modal","ondismiss","razorpayFailureHandler","console","log","Razorpay","open","medici","localStorage","getItem","medicine","JSON","parse","authData","data","status","medicines","response1","post","observe","subscribe","body","alert","ngOnInit","Math","floor","selectors","inputs","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\siddh\\OneDrive\\Desktop\\Medex\\frontend\\src\\src\\app\\razorpay\\razorpay.component.ts","C:\\Users\\siddh\\OneDrive\\Desktop\\Medex\\frontend\\src\\src\\app\\razorpay\\razorpay.component.html"],"sourcesContent":["import { Component, Input } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\ndeclare var Razorpay: any;\n\n@Component({\n  selector: 'app-razorpay',\n  templateUrl: './razorpay.component.html',\n  styleUrls: ['./razorpay.component.css']\n})\nexport class RazorpayComponent {\n  constructor(private http: HttpClient) {}\n  @Input() amount: number = 0;\n  razorpayOptions: any = {\n    key: 'rzp_test_zUGVgemrGsmL8z',\n    amount: 0,\n    currency: 'INR',\n    name: 'MedX',\n    description: 'Purchase Description',\n    image: 'https://your-company-logo-url',\n    handler: (response: any) => {\n      this.razorpaySuccessHandler(response);\n    },\n    prefill: {\n      name: 'Siddhanth Sinha',\n      email: 'siddhanthsinha1401@gmail.com'\n    },\n    notes: {\n      address: 'Razorpay Corporate Office'\n    },\n    theme: {\n      color: '#F37254'\n    }\n  };\n\n  initiatePayment() {\n    const options = {\n      ...this.razorpayOptions,\n      modal: {\n        ondismiss: () => {\n          this.razorpayFailureHandler();\n        }\n      }\n    };\n    console.log(this.amount)\n    Razorpay.open(options);\n  }\n\n  razorpaySuccessHandler(response: any) {\n    console.log(response);\n    // Handle success\n    let medici=localStorage.getItem('cart')\n    let medicine=[]\n    if(medici!==null){\n      medicine = JSON.parse(medici)\n    }\n    const authData  = {data:{status:\"1\" , email:localStorage.getItem('user') , medicines:medicine}};\n    const response1 = this.http.post<any>(\"http://localhost:3000/order/place\", authData, { observe: 'response' });\n    response1.subscribe(response=>{\n      console.log(response.body)\n    })\n    alert('Payment successful!');\n  }\n\n  razorpayFailureHandler() {\n    // Handle failure callback\n    alert('Payment failed!');\n  }\n  ngOnInit() {\n    this.razorpayOptions.amount = Math.floor(this.amount*100);\n  }\n}\n","<div class=\"center-container\">\n  <button (click)=\"initiatePayment()\">Pay with Razorpay</button>\n  </div>\n  <div id=\"razorpay-failure\" style=\"display: none;\">\n    <h2>Payment Failed!</h2>\n    <p>Please try again.</p>\n  </div>\n\n  <div id=\"razorpay-error\" style=\"display: none;\">\n    <h2>Payment Error</h2>\n    <p>An error occurred during the payment process.</p>\n  </div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}